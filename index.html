<!DOCTYPE html>
<html>
<head>
    <title>风云天下</title>

    <link href="kendo/css/kendo.common.min.css" rel="stylesheet"/>
    <link href="kendo/css/kendo.metroblack.min.css" rel="stylesheet"/>
    <link href="css/style.css" rel="stylesheet"/>

    <script src="js/jquery-1.8.2.min.js"></script>
    <script src="kendo/js/kendo.web.min.js"></script>
    <script src="client.js"></script>
</head>
<body>
<div id="horizontal">
    <div id="left-pane">
        <ul id="left-panelbar">
            <li>
                在线用户 (?)
                <ul>
                </ul>
            </li>
            <li>
                别名 (?)
                <ul>
                </ul>
            </li>
            <li>
                触发器 (?)
                <ul>
                </ul>
            </li>
        </ul>
    </div>
    <div id="center-pane">
        <div id="vertical">
            <div id="middle-pane">
                <div class="message">
                    <h4>天主教堂 - </h4>

                    <p>这里的建筑别具一格，房顶特别高，成拱形，上面还有个巨大的十字架。房顶上又有满幅的浮雕。雕的是一些金发碧眼，背生翅膀的小天使。教堂正中的十字架上钉着一个全身是血，长发披面的塑像。</p>

                    <p>这里明显的出口是 <span class="exit">north</span> 和 <span class="exit">west</span>。</p>
                    <ul>
                        <li>普通百姓「风云大主教」奥巴马(Obama)</li>
                        <li>普通百姓「天干地支」吴三(Wusan)</li>
                        <li>教父(Priest)</li>
                    </ul>
                    <div>></div>
                </div>
            </div>
            <div id="bottom-pane">
                <div class="input-pane-content">
                    <input id="entry"/>
                </div>
            </div>
        </div>
    </div>
    <div id="right-pane">
        <ul id="right-panelbar">
            <li>
                当前级别 (?)
                <ul>
                </ul>
            </li>
            <li>
                携带物品 (?)
                <ul>
                    <li>Monday</li>
                </ul>
            </li>
        </ul>
    </div>
</div>

<div id="login-window" style="display:none">
    <div id="tickets">
        <h3>登录</h3>

        <p>
            《风云天下》即将推出，敬请期待！
        </p>
        <ul>
            <li>
                <label for="nick" class="required">玩家:</label>
                <input type="text" id="nick" name="nick" class="k-textbox" placeholder="您的用户名" required
                       validationMessage="请输入您的ID"/>
            </li>
            <li>
                <label for="pwd" class="required">密码:</label>
                <input type="password" id="pwd" name="pwd" class="k-textbox" placeholder="您的密码" required
                       validationMessage="请输入您的密码"/>
            </li>
            <li class="accept">
                <input type="checkbox" id="accept-checkbox" name="accept" required validationMessage="您必须同意此项"/>
                我接受条款和服务条件！
            </li>
            <li class="accept">
                <button id="login-button" class="k-button" type="submit">进 入</button>
            </li>
            <li class="status">
            </li>
        </ul>
    </div>
</div>

<script>
    $(document).ready(function () {
        var layer = $('#horizontal');

        layer
                .width($(window).width() - 2)
                .height($(window).height() - 2);

        window.onresize = function () {
            layer
                    .width($(window).width() - 2)
                    .height($(window).height() - 2);
        }

        layer.kendoSplitter({
            panes: [
                { collapsible: true, size: '200px' },
                { collapsible: false },
                { collapsible: true, size: '200px' }
            ]
        });
        $('#vertical').kendoSplitter({
            orientation: 'vertical',
            panes: [
                { collapsible: false },
                { collapsible: false, resizable: false, size: '48px' }
            ]
        });
        $('#left-panelbar').kendoPanelBar({
            expandMode: 'single'
        });
        $('#right-panelbar').kendoPanelBar({
            expandMode: 'single'
        });

        $('#login-window').kendoWindow({
            actions: ['Refresh', 'Close'],
            draggable: false,
            height: '300px',
            modal: true,
            resizable: false,
            width: '600px',

            activate: function onOpen() {
                $('#nick').focus();
            }
        })
                .data('kendoWindow')
                .center()
                .open();

        var validator = $('#tickets').kendoValidator().data('kendoValidator');
        $('#login-button').click(function () {
            if (validator.validate()) {
                //make the actual join request to the server
                $.ajax({ cache: false, type: "GET" // XXX should be POST
                    , dataType: "json", url: "/join", data: { nick: nick }, error: function () {
                        alert("error connecting to server");
                        showConnect();
                    }, success: onConnect
                });
                return false;
            }
        });

        $('#accept-checkbox')[0].checked = true;

        $('#nick').focus(function () {
            var input = $(this);
            setTimeout(function () {
                input.select();
            });
        });
        $('#pwd').focus(function () {
            var input = $(this);
            setTimeout(function () {
                input.select();
            });
        });
    });
</script>

</body>
</html>
